pgAdmin operations

Add devices to IMS
-> Scripts INSERT


# AspNetUser is auto generated by .NET
SELECT *
	from public."AspNetUsers"
	where "UserName" = 'usermail'


	from public."OrganizationUserRole"
	where userID ==

	--> users

	form public."Patients"
	where OrganizationId = 'my-id'


UPDATE public."Patinet"
	where "OrganizationId"


-------------

SELECT *
FROM PUBLIC."DeviceMeasurement",
	PUBLIC."Device",
	PUBLIC."Location",
	PUBLIC."Organization",
	PUBLIC."DMSSystem"
WHERE PUBLIC."Device"."Id" = PUBLIC."DeviceMeasurement"."DeviceId"
	AND PUBLIC."Device"."LocationId" = PUBLIC."Location"."Id"
	AND PUBLIC."Organization"."Id" = PUBLIC."Location"."OrganizationId"
	AND PUBLIC."Organization"."DMSSystemId" = PUBLIC."DMSSystem"."Id"
	AND PUBLIC."DeviceMeasurement"."StartTime" > '2022-12-01'
ORDER BY PUBLIC."DeviceMeasurement"."StartTime"

---------------------- new

SELECT *
FROM PUBLIC."DeviceMeasurement",
	PUBLIC."Device",
	PUBLIC."Location",
	PUBLIC."Organization",
	PUBLIC."DMSSystem"
WHERE PUBLIC."Device"."Id" = PUBLIC."DeviceMeasurement"."DeviceId"
	AND PUBLIC."Device"."LocationId" = PUBLIC."Location"."Id"
	AND PUBLIC."Organization"."Id" = PUBLIC."Location"."OrganizationId"
	AND PUBLIC."Organization"."DMSSystemId" = PUBLIC."DMSSystem"."Id"
	AND PUBLIC."DeviceMeasurement"."EndTime" BETWEEN '2022-01-01' AND '2022-01-31'
ORDER BY PUBLIC."DeviceMeasurement"."EndTime"

------------------

Device statuses from IMS

WITH RANKED_DEVICES AS (
	SELECT *,
			ROW_NUMBER() OVER (PARTITION BY "Device"."DeviceUid" ORDER BY "Device"."Id" DESC) AS RANK_NO
	FROM PUBLIC."Device")
SELECT *
FROM RANKED_DEVICES,
    PUBLIC."Organization",
	PUBLIC."DMSSystem"
WHERE RANK_NO = 1
	AND (RANKED_DEVICES."OrganizationId" = PUBLIC."Organization"."Id" OR RANKED_DEVICES."OrganizationId" IS NULL)
    AND (AND PUBLIC."Organization"."DMSSystemId" = PUBLIC."DMSSystem"."Id" OR PUBLIC."Organization"."DMSSystemId" IS NULL)
LIMIT 100
